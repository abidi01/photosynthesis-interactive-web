# 光合作用交互网页 - 技术实现说明

## 📋 项目技术架构

这是一个**纯前端**的交互式教学网页项目，使用HTML5、CSS3和JavaScript技术实现，无需服务器，可以直接在浏览器中运行。

---

## 🌐 网页跳转机制

### 1. 导航栏统一跳转

**所有8个页面都使用相同的导航栏**，代码结构如下：

```html
<nav>
    <div class="nav-container">
        <div class="nav-content">
            <div class="nav-brand">
                <span>🍃</span>
                <h1>光合作用原理探索交互网页</h1>
            </div>
            <div class="nav-links">
                <a href="main.html" class="nav-item">首页</a>
                <a href="希尔实验模拟工具.html" class="nav-item">希尔实验</a>
                <a href="阿尔农实验模拟工具.html" class="nav-item">阿尔农实验</a>
                <a href="贾格道夫实验模拟工具.html" class="nav-item">贾格道夫实验</a>
                <a href="光反应.html" class="nav-item">光反应模型</a>
                <a href="阿尔农虚拟实验工具2.html" class="nav-item">阿尔农2</a>
                <a href="卡尔文循环实验模拟工具.html" class="nav-item">卡尔文循环</a>
                <a href="光反应和暗反应之间的联系.html" class="nav-item">光暗反应联系</a>
            </div>
        </div>
    </div>
</nav>
```

**跳转原理**：
- 使用HTML的 `<a>` 标签（超链接）
- `href` 属性指向目标HTML文件名
- 点击链接时，浏览器加载对应的HTML文件
- 因为所有文件在同一文件夹，使用**相对路径**即可

**当前页面高亮**：
```javascript
// 自动识别当前页面并高亮显示
const currentPage = window.location.pathname.split('/').pop();
navItems.forEach(item => {
    const href = item.getAttribute('href');
    if (href === currentPage) {
        item.classList.add('active'); // 添加高亮样式
    }
});
```

### 2. 主页卡片跳转

主页(main.html)使用卡片式布局，每个卡片都是一个链接：

```html
<a href="希尔实验模拟工具.html" class="block w-full py-3 bg-primary text-white text-center rounded-lg">
    开始实验 <i class="fa fa-arrow-right ml-1"></i>
</a>
```

**跳转方式**：
- 点击卡片上的"开始实验"按钮
- 直接跳转到对应的实验页面
- 使用相同的相对路径机制

---

## 🎨 技术栈详解

### 1. HTML5 结构

**使用的HTML5特性**：
- `<!DOCTYPE html>` - HTML5文档声明
- 语义化标签：`<nav>`, `<header>`, `<footer>`, `<section>`
- `<video>` 标签 - 视频播放
- `<canvas>` 和 `<svg>` - 图表绘制
- `draggable="true"` - 拖放功能

### 2. CSS3 样式

**主要技术**：

**a) Flexbox 布局**
```css
.nav-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
```
- 用于导航栏、按钮组等的灵活布局
- 自动适应不同屏幕尺寸

**b) CSS Grid 布局**
```css
.grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}
```
- 主页的卡片网格布局
- 响应式设计（自动调整列数）

**c) CSS 动画**
```css
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.card-icon {
    animation: float 3s ease-in-out infinite;
}
```
- 图标浮动效果
- 气泡上升动画
- 过渡效果

**d) 渐变背景**
```css
background: linear-gradient(to right, #2D7D46, #1B5E20);
```
- 导航栏绿色渐变
- 按钮渐变效果

**e) 响应式设计**
```css
@media (max-width: 768px) {
    .experiment-area {
        height: 400px;
    }
}
```
- 适配手机、平板、电脑屏幕

### 3. JavaScript 交互

**核心技术实现**：

**a) 拖放功能 (Drag & Drop API)**
```javascript
// 开始拖动
item.addEventListener("dragstart", (e) => {
    const draggedItemId = e.target.id;
    e.dataTransfer.setData("text/plain", draggedItemId);
});

// 允许放置
target.addEventListener("dragover", (e) => {
    e.preventDefault();
});

// 完成放置
target.addEventListener("drop", (e) => {
    e.preventDefault();
    const droppedItemId = e.dataTransfer.getData("text/plain");
    // 验证是否正确，然后放置
});
```

**b) 动态DOM操作**
```javascript
// 创建气泡元素
const bubble = document.createElement('div');
bubble.className = 'bubble';
bubble.style.left = `${x}px`;
bubble.style.bottom = '0';
container.appendChild(bubble);

// 动画结束后移除
setTimeout(() => {
    bubble.remove();
}, 2000);
```

**c) 定时器和动画**
```javascript
// 实验运行定时器
experimentInterval = setInterval(() => {
    updateOxygenGeneration();
}, 1000); // 每秒更新一次

// 动画帧
function animate() {
    // 更新状态
    requestAnimationFrame(animate);
}
```

**d) 事件监听**
```javascript
// 按钮点击
startBtn.addEventListener('click', () => {
    startExperiment();
});

// 滑块变化
slider.addEventListener('input', () => {
    updateValue(slider.value);
});

// 键盘事件
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeModal();
    }
});
```

**e) 数据可视化 (Chart.js)**
```javascript
// 创建图表
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: timeData,
        datasets: [{
            label: '氧气生成量',
            data: oxygenData,
            borderColor: '#2e7d32'
        }]
    }
});

// 更新图表
chart.data.labels = newTimeData;
chart.data.datasets[0].data = newOxygenData;
chart.update();
```

---

## 🎯 核心功能实现原理

### 1. 拖动填空系统（光反应.html）

**技术要点**：
```javascript
// 1. 使用次数限制
let hUsageCount = 0;
const MAX_H_USAGE = 4;

if (droppedItemId === 'h') {
    if (hUsageCount >= MAX_H_USAGE) {
        // 显示错误提示
        return;
    }
    hUsageCount++;
}

// 2. 互换组验证
const swapGroups = [
    ['o2-h-left1', 'o2-h-left2'],  // O2和H+可以互换
    ['nadp-h-right1', 'nadp-h-right2']  // NADP+和H+可以互换
];

// 检查组内是否已有相同物品
if (hasSameItem) {
    // 不允许放置
    return;
}

// 3. 克隆元素
const cloneItem = draggedItem.cloneNode(true);
cloneItem.draggable = false; // 放置后不可再拖动
target.appendChild(cloneItem);
```

### 2. 实验模拟系统（希尔实验）

**技术要点**：
```javascript
// 1. 条件判断
const light = lightSwitch.checked ? 1 : 0;
const oxidant = oxidantSelect.value !== 'none' ? 1 : 0;

// 2. 产物计算
const oxygen = light * oxidant * timeFactor * 100;

// 3. 视觉反馈
// 液体颜色变化
liquid.style.backgroundColor = getColor(oxidant);

// 气泡动画
for (let i = 0; i < bubbleCount; i++) {
    createBubble();
}

// 4. 数据记录
timeData.push(currentTime);
oxygenData.push(oxygenLevel);
chart.update();
```

### 3. 视频播放控制

**技术要点**：
```javascript
// 1. 模态框显示
videoBtn.addEventListener('click', () => {
    videoModal.style.display = 'block';
    videoPlayer.play();
});

// 2. 关闭控制
closeBtn.addEventListener('click', () => {
    videoModal.style.display = 'none';
    videoPlayer.pause();
    videoPlayer.currentTime = 0; // 重置到开头
});

// 3. ESC键关闭
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeModal();
    }
});

// 4. 点击外部关闭
videoModal.addEventListener('click', (e) => {
    if (e.target === videoModal) {
        closeModal();
    }
});
```

---

## 📁 文件组织结构

```
项目文件夹/
├── main.html                          # 主页（入口）
├── 光反应.html                        # 各个实验页面
├── 希尔实验模拟工具.html
├── ...（其他HTML文件）
│
├── 图片/                              # 图片资源
│   ├── 光.png
│   ├── 光系统I.png
│   ├── 光系统II.png
│   ├── NADP+.png
│   ├── NADPH.png
│   ├── O2.png
│   ├── H2O.png
│   ├── H⁺模型图.png
│   ├── ADP+Pi.png
│   ├── 电子.png
│   ├── 光反应背景图.png
│   └── 光反应与暗反应背景图.png
│
├── 视频/                              # 视频资源
│   ├── 光反应.MP4
│   └── 光反应和暗反应.mp4
│
├── css/                               # 样式文件
│   ├── fontawesome.min.css           # 图标库
│   └── tailwind.min.css              # CSS框架
│
└── js/                                # JavaScript库
    └── chart.min.js                   # 图表库
```

**路径引用方式**：
```html
<!-- 相对路径引用图片 -->
<img src="图片/光.png" alt="光">

<!-- 相对路径引用视频 -->
<video src="视频/光反应.MP4"></video>

<!-- 相对路径引用CSS -->
<link href="css/fontawesome.min.css" rel="stylesheet">

<!-- 相对路径引用JS -->
<script src="js/chart.min.js"></script>
```

---

## 🔗 外部资源依赖

### 1. CDN资源（需要网络）

**Tailwind CSS** (main.html)
```html
<script src="https://cdn.tailwindcss.com"></script>
```
- 用途：快速样式开发
- 影响：主页样式
- 离线方案：可以下载本地版本

**Font Awesome** (main.html)
```html
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
```
- 用途：图标显示
- 影响：导航栏和按钮图标
- 离线方案：已有本地备份(css/fontawesome.min.css)

### 2. 本地资源（无需网络）

**Chart.js** (希尔实验)
```html
<script src="js/chart.min.js"></script>
```
- 用途：绘制实时数据图表
- 完全本地化，无需网络

---

## 🎨 样式系统

### 1. 颜色主题

```css
/* 主题色定义 */
:root {
    --primary: #2D7D46;      /* 主绿色 */
    --secondary: #7CB342;    /* 次绿色 */
    --accent: #FFB300;       /* 强调色（黄色）*/
    --light: #E8F5E9;        /* 浅绿背景 */
    --dark: #1B5E20;         /* 深绿色 */
}
```

### 2. 响应式断点

```css
/* 手机 */
@media (max-width: 768px) {
    .nav-links { flex-direction: column; }
}

/* 平板 */
@media (min-width: 769px) and (max-width: 1024px) {
    .container { max-width: 900px; }
}

/* 电脑 */
@media (min-width: 1025px) {
    .container { max-width: 1200px; }
}
```

---

## 🔧 浏览器兼容性

### 支持的浏览器

| 浏览器 | 最低版本 | 推荐版本 |
|--------|----------|----------|
| Chrome | 80+ | 最新版 |
| Edge | 80+ | 最新版 |
| Firefox | 75+ | 最新版 |
| Safari | 13+ | 最新版 |

### 使用的现代特性

1. **Flexbox** - 所有现代浏览器支持
2. **CSS Grid** - IE11不支持，其他支持
3. **Drag & Drop API** - 所有现代浏览器支持
4. **requestAnimationFrame** - 所有现代浏览器支持
5. **ES6语法** (箭头函数、const/let) - 现代浏览器支持

---

## 💡 技术亮点

### 1. 无需服务器
- 纯静态HTML文件
- 双击即可运行
- 无需配置环境

### 2. 模块化设计
- 每个实验独立HTML文件
- 统一的导航栏
- 可单独修改某个实验

### 3. 性能优化
- CSS动画（GPU加速）
- 事件委托
- 防抖和节流
- 按需创建DOM元素

### 4. 用户体验
- 即时反馈（拖放提示）
- 平滑动画
- 响应式设计
- 键盘快捷键支持

---

## 🎓 教师介绍时的技术要点

### 简单版（5分钟）

"这个网页使用了**HTML、CSS和JavaScript**三种基础网页技术：

1. **网页跳转**：点击导航栏的链接，就像点击网页上的超链接一样，会跳转到对应的实验页面。所有页面都在同一个文件夹里，通过文件名相互连接。

2. **拖动功能**：使用了HTML5的拖放技术，就像拖动文件一样，可以把模型拖到指定位置。

3. **动画效果**：使用CSS动画让气泡上升、图标浮动，让实验过程更生动。

4. **实时图表**：使用Chart.js图表库，实时显示实验数据的变化曲线。

5. **视频播放**：使用HTML5的video标签，可以播放教学视频。"

### 详细版（10-15分钟）

可以展示代码片段，讲解：
- 导航栏的HTML结构
- 拖放的JavaScript代码
- CSS动画的实现
- 图表数据的更新机制
- 文件之间的相对路径引用

---

**技术总结**：这是一个使用现代Web技术实现的纯前端教学工具，无需安装，跨平台运行，易于分享和使用。