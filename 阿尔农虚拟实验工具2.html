<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿å°”å†œè™šæ‹Ÿå®éªŒå·¥å…·2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        /* å¯¼èˆªæ æ ·å¼ */
        nav {
            background: linear-gradient(to right, #2D7D46, #1B5E20);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0.75rem 1.25rem;
        }
        
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
        }
        
        .nav-brand span {
            font-size: 1.5rem;
            margin-right: 0.75rem;
        }
        
        .nav-brand h1 {
            font-size: 1.25rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin: 0;
        }
        
        .nav-links {
            display: flex;
            gap: 0.25rem;
            flex-wrap: wrap;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            display: inline-block;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2e7d32;
            text-align: center;
        }
        .experiment-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        .test-tube {
            width: 100px;
            height: 200px;
            border: 2px solid #333;
            border-radius: 0 0 10px 10px;
            position: relative;
            overflow: hidden;
            background-color: #e3f2fd;
            margin-bottom: 20px;
        }
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: #a5d6a7;
            height: 66.66%;
            transition: height 0.5s;
        }
        .chloroplast {
            position: absolute;
            width: 15px;
            height: 8px;
            background-color: #2e7d32;
            border-radius: 50%;
            opacity: 0.7;
            animation: float 5s infinite ease-in-out;
        }
        .sugar-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            color: white;
            text-shadow: 0 0 2px black;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .light-btn {
            background-color: #ffeb3b;
            color: #333;
        }
        .light-btn.on {
            background-color: #fbc02d;
            box-shadow: 0 0 10px #ffeb3b;
        }
        .co2-btn {
            background-color: #9e9e9e;
            color: white;
        }
        .co2-btn.active {
            background-color: #616161;
        }
        .atp-btn {
            background-color: #ff5722;
            color: white;
        }
        .atp-btn.active {
            background-color: #e64a19;
        }
        .nadph-btn {
            background-color: #673ab7;
            color: white;
        }
        .nadph-btn.active {
            background-color: #512da8;
        }
        .action-btn {
            background-color: #2196f3;
            color: white;
        }
        .action-btn.reset {
            background-color: #f44336;
        }
        .status {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            min-height: 20px;
        }
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #4caf50;
            width: 0%;
            transition: width 0.5s;
        }
        .chart-container {
            width: 100%;
            height: 200px;
            margin-top: 20px;
            position: relative;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }
        .info-panel {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 8px;
            line-height: 1.6;
        }
        .info-panel h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        .info-panel ul {
            margin-left: 20px;
        }
        .info-panel li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav>
        <div class="nav-container">
            <div class="nav-content">
                <div class="nav-brand">
                    <span>ğŸƒ</span>
                    <h1>å…‰åˆä½œç”¨åŸç†æ¢ç´¢äº¤äº’ç½‘é¡µ</h1>
                </div>
                <div class="nav-links">
                    <a href="main.html" class="nav-item">é¦–é¡µ</a>
                    <a href="å¸Œå°”å®éªŒæ¨¡æ‹Ÿå·¥å…·.html" class="nav-item">å¸Œå°”å®éªŒ</a>
                    <a href="é˜¿å°”å†œå®éªŒæ¨¡æ‹Ÿå·¥å…·.html" class="nav-item">é˜¿å°”å†œå®éªŒ</a>
                    <a href="è´¾æ ¼é“å¤«å®éªŒæ¨¡æ‹Ÿå·¥å…·.html" class="nav-item">è´¾æ ¼é“å¤«å®éªŒ</a>
                    <a href="å…‰ååº”.html" class="nav-item">å…‰ååº”æ¨¡å‹</a>
                    <a href="é˜¿å°”å†œè™šæ‹Ÿå®éªŒå·¥å…·2.html" class="nav-item active">é˜¿å°”å†œ2</a>
                    <a href="å¡å°”æ–‡å¾ªç¯å®éªŒæ¨¡æ‹Ÿå·¥å…·.html" class="nav-item">å¡å°”æ–‡å¾ªç¯</a>
                    <a href="å…‰ååº”å’Œæš—ååº”ä¹‹é—´çš„è”ç³».html" class="nav-item">å…‰æš—ååº”è”ç³»</a>
                    <a href="å¯¹æ¥é«˜è€ƒ.html" class="nav-item">å¯¹æ¥é«˜è€ƒ</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>é˜¿å°”å†œè™šæ‹Ÿå®éªŒå·¥å…·2</h1>
        <div class="experiment-area">
            <div class="test-tube" id="testTube">
                <div class="liquid">
                    <div class="sugar-indicator">ç³–ç±»: 0</div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="sugarChart"></canvas>
            </div>
            <div class="status">å‡†å¤‡å¼€å§‹å®éªŒ</div>
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
        </div>
        <div class="controls">
            <button class="light-btn" id="lightBtn">å…‰ç…§: å…³é—­</button>
            <button class="co2-btn" id="co2Btn">æ·»åŠ COâ‚‚</button>
            <button class="atp-btn" id="atpBtn">æ·»åŠ ATP</button>
            <button class="nadph-btn" id="nadphBtn">æ·»åŠ NADPH</button>
        </div>
        <div class="controls">
            <button class="action-btn" id="startBtn">å¼€å§‹å®éªŒ</button>
            <button class="action-btn" id="stopBtn">åœæ­¢å®éªŒ</button>
            <button class="action-btn reset" id="resetBtn">é‡ç½®å®éªŒ</button>
        </div>
        
        <div class="info-panel">
            <h3>å®éªŒè¯´æ˜</h3>
            <p><strong>å®éªŒç›®çš„ï¼š</strong>æ¨¡æ‹Ÿå…‰åˆä½œç”¨ä¸­å…‰ååº”å’Œæš—ååº”ï¼ˆå¡å°”æ–‡å¾ªç¯ï¼‰çš„å…³ç³»</p>
            <ul>
                <li><strong>å…‰ååº”é˜¶æ®µï¼š</strong>å¼€å¯å…‰ç…§åï¼Œå¶ç»¿ä½“åˆ©ç”¨å…‰èƒ½äº§ç”ŸATPå’ŒNADPHï¼ˆä¸éœ€è¦å¤–åŠ ATP/NADPHï¼‰</li>
                <li><strong>æš—ååº”é˜¶æ®µï¼š</strong>å…³é—­å…‰ç…§ï¼Œæ·»åŠ COâ‚‚ã€ATPå’ŒNADPHåï¼Œå¯ä»¥åˆæˆç³–ç±»</li>
                <li><strong>å®Œæ•´å…‰åˆä½œç”¨ï¼š</strong>åŒæ—¶å¼€å¯å…‰ç…§å’Œæ·»åŠ COâ‚‚ï¼Œå¯ä»¥æŒç»­åˆæˆç³–ç±»</li>
            </ul>
            <p><strong>æ“ä½œæç¤ºï¼š</strong></p>
            <ul>
                <li>ç‚¹å‡»å„æŒ‰é’®åˆ‡æ¢å®éªŒæ¡ä»¶ï¼ˆæŒ‰é’®å˜è‰²è¡¨ç¤ºå·²æ¿€æ´»ï¼‰</li>
                <li>ç‚¹å‡»"å¼€å§‹å®éªŒ"è§‚å¯Ÿç³–ç±»ç”Ÿæˆæ›²çº¿</li>
                <li>å°è¯•ä¸åŒæ¡ä»¶ç»„åˆï¼Œç†è§£å…‰ååº”å’Œæš—ååº”çš„å…³ç³»</li>
            </ul>
        </div>
    </div>

    <script src="js/chart.min.js"></script>
    <script>
        // å®éªŒçŠ¶æ€å˜é‡
        let isLightOn = false;
        let hasCO2 = false;
        let hasATP = false;
        let hasNADPH = false;
        let isExperimentRunning = false;
        let sugarLevel = 0;
        let experimentInterval;
        let sugarData = [];
        let timeData = [];
        let chart;
        
        // DOMå…ƒç´ 
        const lightBtn = document.getElementById('lightBtn');
        const co2Btn = document.getElementById('co2Btn');
        const atpBtn = document.getElementById('atpBtn');
        const nadphBtn = document.getElementById('nadphBtn');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resetBtn = document.getElementById('resetBtn');
        const statusText = document.querySelector('.status');
        const sugarIndicator = document.querySelector('.sugar-indicator');
        const progressBar = document.querySelector('.progress-bar');
        const testTube = document.getElementById('testTube');
        const ctx = document.getElementById('sugarChart').getContext('2d');
        
        // åˆ›å»ºå¶ç»¿ä½“
        function createChloroplasts() {
            const liquid = document.querySelector('.liquid');
            for (let i = 0; i < 10; i++) {
                const chloroplast = document.createElement('div');
                chloroplast.className = 'chloroplast';
                chloroplast.style.left = `${Math.random() * 80 + 10}px`;
                chloroplast.style.bottom = `${Math.random() * 120}px`;
                chloroplast.style.animationDelay = `${Math.random() * 5}s`;
                chloroplast.style.transform = `rotate(${Math.random() * 360}deg)`;
                liquid.appendChild(chloroplast);
            }
        }
        
        // åˆå§‹åŒ–å›¾è¡¨
        function initChart() {
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timeData,
                    datasets: [{
                        label: 'ç³–ç±»ç”Ÿæˆé‡',
                        data: sugarData,
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'ç³–ç±»ç”Ÿæˆé‡ (%)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'æ—¶é—´ (ç§’)'
                            }
                        }
                    }
                }
            });
        }
        
        // æ›´æ–°å›¾è¡¨
        function updateChart(time) {
            timeData.push(time);
            sugarData.push(sugarLevel);
            chart.update();
        }
        
        // å…‰ç…§æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        lightBtn.addEventListener('click', () => {
            isLightOn = !isLightOn;
            lightBtn.textContent = `å…‰ç…§: ${isLightOn ? 'å¼€å¯' : 'å…³é—­'}`;
            lightBtn.classList.toggle('on', isLightOn);
            updateStatus();
        });
        
        // CO2æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        co2Btn.addEventListener('click', () => {
            hasCO2 = !hasCO2;
            co2Btn.classList.toggle('active', hasCO2);
            updateStatus();
        });
        
        // ATPæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        atpBtn.addEventListener('click', () => {
            hasATP = !hasATP;
            atpBtn.classList.toggle('active', hasATP);
            updateStatus();
        });
        
        // NADPHæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        nadphBtn.addEventListener('click', () => {
            hasNADPH = !hasNADPH;
            nadphBtn.classList.toggle('active', hasNADPH);
            updateStatus();
        });
        
        // å¼€å§‹å®éªŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        startBtn.addEventListener('click', () => {
            if (!isExperimentRunning) {
                isExperimentRunning = true;
                statusText.textContent = 'å®éªŒè¿›è¡Œä¸­...';
                let time = 0;
                
                experimentInterval = setInterval(() => {
                    time++;
                    
                    // å®Œæ•´å…‰åˆä½œç”¨: æœ‰å…‰ç…§å’ŒCO2ï¼ˆå…‰ååº”äº§ç”ŸATPå’ŒNADPHï¼Œæš—ååº”åˆæˆç³–ï¼‰
                    if (isLightOn && hasCO2) {
                        sugarLevel += 2; // å®Œæ•´å…‰åˆä½œç”¨æ•ˆç‡æœ€é«˜
                    }
                    // ä»…æš—ååº”: æ— å…‰ä½†æœ‰CO2ã€ATPå’ŒNADPHï¼ˆåªèƒ½çŸ­æš‚åˆæˆç³–ï¼‰
                    else if (!isLightOn && hasCO2 && hasATP && hasNADPH) {
                        sugarLevel += 1;
                    }
                    // ä»…å…‰ååº”: æœ‰å…‰ä½†æ— CO2ï¼ˆåªäº§ç”ŸATPå’ŒNADPHï¼Œä¸åˆæˆç³–ï¼‰
                    else if (isLightOn && !hasCO2) {
                        sugarLevel += 0.5; // å°‘é‡ç³–ç±»ï¼ˆå¯èƒ½æ˜¯å¶ç»¿ä½“å†…å‚¨å­˜çš„ï¼‰
                    }
                    
                    // æ›´æ–°ç³–ç±»æŒ‡ç¤ºå™¨å’Œè¿›åº¦æ¡
                    sugarIndicator.textContent = `ç³–ç±»: ${Math.round(sugarLevel)}`;
                    progressBar.style.width = `${Math.min(sugarLevel, 100)}%`;
                    updateChart(time);
                    
                    // é™åˆ¶ç³–ç±»æœ€å¤§å€¼
                    if (sugarLevel >= 100) {
                        sugarLevel = 100;
                        statusText.textContent = 'å®éªŒå®Œæˆ: ç³–ç±»ç”Ÿæˆè¾¾åˆ°æœ€å¤§å€¼';
                        clearInterval(experimentInterval);
                        isExperimentRunning = false;
                    }
                }, 200);
            }
        });
        
        // åœæ­¢å®éªŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        stopBtn.addEventListener('click', () => {
            if (isExperimentRunning) {
                clearInterval(experimentInterval);
                isExperimentRunning = false;
                statusText.textContent = 'å®éªŒå·²åœæ­¢';
            }
        });
        
        // é‡ç½®å®éªŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        resetBtn.addEventListener('click', () => {
            clearInterval(experimentInterval);
            isExperimentRunning = false;
            sugarLevel = 0;
            sugarData = [];
            timeData = [];
            sugarIndicator.textContent = 'ç³–ç±»: 0';
            progressBar.style.width = '0%';
            statusText.textContent = 'å®éªŒå·²é‡ç½®';
            chart.data.labels = timeData;
            chart.data.datasets[0].data = sugarData;
            chart.update();
        });
        
        // æ›´æ–°çŠ¶æ€æ–‡æœ¬
        function updateStatus() {
            if (!isExperimentRunning) {
                let status = 'å‡†å¤‡å¼€å§‹å®éªŒ - ';
                status += isLightOn ? 'å…‰ç…§å¼€å¯ | ' : 'å…‰ç…§å…³é—­ | ';
                status += hasCO2 ? 'COâ‚‚å·²æ·»åŠ  | ' : 'COâ‚‚æœªæ·»åŠ  | ';
                status += hasATP ? 'ATPå·²æ·»åŠ  | ' : 'ATPæœªæ·»åŠ  | ';
                status += hasNADPH ? 'NADPHå·²æ·»åŠ ' : 'NADPHæœªæ·»åŠ ';
                statusText.textContent = status;
            }
        }
        
        // åˆå§‹åŒ–
        createChloroplasts();
        initChart();
        updateStatus();
    </script>
</body>
</html>
